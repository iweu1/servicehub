<!doctype html>
<html lang="ru" data-theme="dark">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>ServiceHub ‚Ä¢ –õ–µ–≥–∞–ª—å–Ω—ã–π –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å —É—Å–ª—É–≥</title>
  <!--
    –≠—Ç–æ—Ç —Ñ–∞–π–ª –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é –∏—Å—Ö–æ–¥–Ω–æ–≥–æ —à–∞–±–ª–æ–Ω–∞,
    –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω–Ω—É—é –ø–æ–¥ –±–µ–ª—ã–π (—Å–≤–µ—Ç–ª—ã–π) –¥–∏–∑–∞–π–Ω –∏ –ª–µ–≥–∞–ª—å–Ω—ã–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —É—Å–ª—É–≥.
    –ù–∏–∫–∞–∫–æ–π –Ω–µ–ª–µ–≥–∞–ª—å–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∑–¥–µ—Å—å –Ω–µ—Ç: –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ –ø—Ä–∏–º–µ—Ä—ã –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
    —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç —à–∏—Ä–æ–∫–æ–º—É —Å–ø–µ–∫—Ç—Ä—É –ª–µ–≥–∞–ª—å–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤, –≤–∫–ª—é—á–∞—è –¥–∏–∑–∞–π–Ω,
    –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ, –º–∞—Ä–∫–µ—Ç–∏–Ω–≥ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫—É. –¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞ –±—ã–ª–∞ —Å–≤–µ—Ç–ª–æ–π –¥–ª—è
    —É–ª—É—á—à–µ–Ω–∏—è —á–∏—Ç–∞–µ–º–æ—Å—Ç–∏ –∏ –æ—â—É—â–µ–Ω–∏—è —á–∏—Å—Ç–æ—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
  -->
  <style>
  :root {
    /* –¢—ë–º–Ω–∞—è –ø–∞–ª–∏—Ç—Ä–∞ */
    --primary:#0a0a0a; --secondary:#121212; --tertiary:#1b1b1b; --card-bg:#141414;
    --elev-1:#161616; --elev-2:#1e1e1e; --elev-3:#242424;
    --text:#e8e8e8; --text-muted:#a2a2a2; --muted-2:#858585;
    --accent:#2563eb; --accent-2:#3b82f6; --accent-dark:#1d4ed8;
    --danger:#ef4444; --warning:#f59e0b; --info:#3b82f6; --success:#10b981;
    --border:#2a2a2a; --ring:#3b82f6; --ring-soft:rgba(59,130,246,.25);
    --header-h:64px; --radius:14px;
    --shadow-1:0 1px 2px rgba(0,0,0,.3), 0 4px 12px rgba(0,0,0,.35);
    --shadow-2:0 6px 20px rgba(0,0,0,.45);
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--primary);color:var(--text);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Arial;line-height:1.6}
  .container{max-width:1200px;margin:0 auto;padding:0 16px}
  a{color:var(--accent-dark);text-decoration:none}
  :focus-visible{outline:none;box-shadow:0 0 0 3px var(--ring-soft)}

  /*
   * –í–µ—Ä—Ö–Ω–∏–π –∑–∞–≥–æ–ª–æ–≤–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã–¥–µ—Ä–∂–∞–Ω –≤ —Ç—ë–º–Ω–æ–π –≥–∞–º–º–µ, —á—Ç–æ–±—ã –¥–∏–∑–∞–π–Ω –±—ã–ª —Ü–µ–ª—å–Ω—ã–º.
   * –ó–∞–º–µ–Ω—è–µ–º –±–µ–ª—ã–π –≥—Ä–∞–¥–∏–µ–Ω—Ç –Ω–∞ —Ç—ë–º–Ω—ã–π, –∫–∞–∫ –∏ –ø—Ä–æ—á–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞.
   */
  header{position:sticky;top:0;z-index:50;height:var(--header-h);backdrop-filter:saturate(1.2) blur(6px);background:linear-gradient(180deg, rgba(18,18,18,.9), rgba(18,18,18,.65));border-bottom:1px solid var(--border)}
  .header-content{display:flex;align-items:center;justify-content:space-between;height:100%}
  .logo{display:flex;align-items:center;gap:10px;color:var(--accent);font-weight:800}
  nav ul{display:flex;gap:18px;list-style:none;margin:0;padding:0}
  nav a{color:var(--text-muted);padding:10px 8px;border-radius:10px}
  nav a.active, nav a:hover{color:var(--text)}
  .auth{display:flex;gap:8px;align-items:center}
  .btn{display:inline-flex;align-items:center;gap:8px;cursor:pointer;border:1px solid var(--border);background:var(--elev-1);color:var(--text);padding:10px 14px;border-radius:12px;font-weight:700}
  .btn-primary{background:linear-gradient(180deg,var(--accent),var(--accent-dark));color:#fff;border-color:transparent;box-shadow:var(--shadow-1)}
  .btn-danger{background:linear-gradient(180deg,#ef4444,#dc2626);color:#fff;border-color:transparent}
  .chip{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);background:var(--elev-1);padding:6px 10px;border-radius:999px;color:var(--text);font-size:12px}

  .grid{display:grid;grid-template-columns:280px 1fr;gap:24px}
  .sidebar{background:linear-gradient(180deg,var(--elev-1),var(--elev-2));border:1px solid var(--border);border-radius:var(--radius);padding:16px;position:sticky;top:calc(var(--header-h) + 12px);height:max-content}
  .sidebar h3{display:flex;align-items:center;justify-content:space-between;margin:0 0 10px}
  .toggle{border:1px solid var(--border);background:var(--elev-1);color:var(--text-muted);border-radius:8px;padding:6px 10px;cursor:pointer;font-size:12px}
  .list-plain{list-style:none;margin:0;padding:0}
  .list-plain li{padding:10px;border-radius:10px;border:1px solid transparent;cursor:pointer}
  .list-plain li:hover{background:var(--elev-1);border-color:var(--border)}
  .list-plain li.active{color:var(--accent-2);background:linear-gradient(0deg, rgba(147,197,253,.15), transparent);border-color:rgba(147,197,253,.35)}

  .link-chip{display:inline-flex;align-items:center;gap:6px;border:1px solid var(--border);background:var(--elev-1);padding:6px 10px;border-radius:999px;font-size:12px}
  .forum-row{display:grid;grid-template-columns:1fr 1.2fr auto;gap:8px;align-items:center}
  .forum-row .field{width:100%}
  .forum-row .rm{min-width:40px}

  .content{min-width:0}
  .section-head{display:flex;align-items:center;justify-content:space-between;margin:18px 0}
  .cards{display:flex;flex-direction:column;gap:12px}

  .card{width:100%;background:linear-gradient(180deg,var(--card-bg),var(--elev-1));border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow-1);display:grid;grid-template-columns:1fr auto;grid-auto-rows:auto}
  .card-head{grid-column:1;display:flex;gap:12px;align-items:center;padding:14px 16px;border-bottom:1px solid var(--border)}
  .avatar{width:56px;height:56px;border-radius:14px;display:flex;align-items:center;justify-content:center;font-weight:800;border:2px solid rgba(147,197,253,.35);background:radial-gradient(circle at 30% 30%, rgba(147,197,253,.25), transparent 60%), var(--tertiary);overflow:hidden}
  .avatar img{width:100%;height:100%;object-fit:cover;border-radius:inherit;display:block}
  .card-foot{grid-column:2;align-self:center;padding:14px 16px;display:flex;gap:8px;justify-content:flex-end;align-items:center}

  .notice{margin:16px 0;padding:10px 12px;border:1px dashed var(--border);border-radius:12px;color:var(--text-muted)}

  .ticker{margin-top:16px;border:1px solid var(--border);border-radius:14px;background:linear-gradient(0deg,var(--elev-1),var(--elev-2));overflow:hidden}
  .ticker-track{display:flex;gap:36px;padding:10px 12px;white-space:nowrap;animation:scroll var(--t,28s) linear infinite}
  .ticker:hover .ticker-track{animation-play-state:paused}
  @keyframes scroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}

  footer{margin-top:40px}
  .cta{display:flex;align-items:center;justify-content:space-between;gap:16px;border:1px solid var(--border);background:var(--elev-2);border-radius:14px;padding:16px}
  .count{display:inline-flex;align-items:center;gap:8px;border:1px solid var(--border);background:var(--elev-1);border-radius:12px;padding:8px 12px;font-weight:700}

  .modal{position:fixed;inset:0;background:rgba(0,0,0,.45);display:none;align-items:center;justify-content:center;padding:16px}
  .modal.open{display:flex}
  .panel{width:min(720px,100%);background:linear-gradient(180deg,var(--elev-2),var(--elev-1));border:1px solid var(--border);border-radius:16px;box-shadow:var(--shadow-2)}
  .panel-head{display:flex;align-items:center;justify-content:space-between;padding:16px 18px;border-bottom:1px solid var(--border)}
  .panel-body{padding:16px 18px}
  .x{background:transparent;border:none;color:var(--text-muted);font-size:20px;cursor:pointer}

  .row{display:flex;gap:10px;align-items:center}
  .col{display:flex;flex-direction:column;gap:8px}
  .field{background:var(--tertiary);border:1px solid var(--border);border-radius:10px;padding:10px 12px;color:var(--text)}
  .select{background:var(--tertiary);border:1px solid var(--border);border-radius:10px;padding:10px 12px;color:var(--text)}
  .muted{color:var(--text-muted)}
  .table{width:100%;border-collapse:separate;border-spacing:0}
  .table th,.table td{border-bottom:1px solid var(--border);padding:10px;text-align:left}
  .table th{color:var(--text-muted);font-weight:600}

  .tabs{display:flex;gap:8px;margin-bottom:12px}
  .tab{background:var(--elev-1);border:1px solid var(--border);color:var(--text-muted);padding:8px 12px;border-radius:999px;cursor:pointer}
  .tab.active{background:var(--accent);color:#fff;border-color:transparent}

  .badge{display:inline-flex;gap:6px;align-items:center;background:var(--elev-1);border:1px solid var(--border);border-radius:999px;padding:4px 10px;font-size:12px}
  .ok{color:#34d399}.warn{color:#fbbf24}.err{color:#f87171}

  .hidden{display:none}
  .notification{display:flex;align-items:center;justify-content:space-between;padding:10px 14px;background:linear-gradient(180deg,#fde68a,#f59e0b);color:#111827;border:none;border-radius:14px;box-shadow:var(--shadow-1);font-weight:700;margin-top:16px}
  .header-banners{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:16px}
  .banner-slot{display:flex;align-items:center;justify-content:center;min-height:120px;background:var(--elev-1);border:1px dashed var(--border);border-radius:14px;box-shadow:inset 0 0 0 1px rgba(0,0,0,.03);color:var(--muted-2)}
  .guarantee{display:grid;grid-template-columns:1fr auto;gap:18px;align-items:center;border-radius:16px;padding:18px 20px;border:1px solid var(--border);background:var(--elev-2);box-shadow:var(--shadow-1);position:relative;overflow:hidden;margin-top:16px}
  .guarantee::before{content:"";position:absolute;left:-80px;top:-40px;width:240px;height:180px;border-radius:50%;background:radial-gradient(100px 100px at 55% 55%, rgba(147,197,253,.12), rgba(147,197,253,0) 70%);pointer-events:none}
  .g-actions{display:flex;flex-direction:column;align-items:flex-end;gap:6px;min-width:220px}
  .search-section{border-radius:16px;border:1px solid var(--border);background:var(--elev-1);box-shadow:var(--shadow-1);padding:12px;margin-top:16px}
  .search-row{display:flex;gap:12px}
  .search-row .field{flex:1}
.info-grid{display:grid;grid-template-columns:repeat(3,minmax(0,1fr));gap:16px;margin-top:16px;align-items:stretch;grid-auto-rows:1fr}
.info-card{border:1px solid var(--border);background:linear-gradient(0deg,var(--elev-2),var(--elev-1));border-radius:12px;padding:12px 14px 8px;display:flex;flex-direction:column;height:100%}
  .info-head{display:flex;align-items:center;gap:10px;border:1px solid var(--border);background:var(--elev-1);border-radius:8px;padding:10px;font-weight:700;color:var(--text-muted);margin-bottom:12px}
  .info-body{border:1px solid var(--border);background:var(--elev-1);border-radius:8px;padding:10px 12px 8px;display:flex;flex-direction:column;gap:12px;min-height:0}
  .list-clean{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}
  .onion-wrap{display:grid;grid-template-columns:1fr auto;gap:8px;align-items:center}
  .onion-field{display:block;min-width:0;border:1px dashed var(--border);background:var(--tertiary);border-radius:8px;padding:12px;color:var(--text-muted);white-space:nowrap;overflow-x:auto;overflow-y:hidden;font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;font-size:14px}
  .onion-field{scrollbar-width:thin;scrollbar-color:var(--accent-2) var(--elev-2)}
  .onion-field::-webkit-scrollbar{height:8px}
  .onion-field::-webkit-scrollbar-track{background:var(--elev-2);border-radius:999px}
  .onion-field::-webkit-scrollbar-thumb{background:linear-gradient(90deg,var(--accent),var(--accent-dark));border-radius:999px;border:2px solid var(--elev-2)}
  .onion-field:hover::-webkit-scrollbar-thumb{background:var(--accent-2)}
  .onion-field::-webkit-scrollbar-button{width:0;height:0;display:none}
  .partners{margin-top:16px;border:1px solid var(--border);background:linear-gradient(0deg,var(--elev-2),var(--elev-1));border-radius:12px;padding:16px}
  .partners h3{margin:0 0 12px;text-align:center}
  .partners-slider{overflow:hidden;position:relative;border-radius:10px}
  .slider-track{display:flex;gap:16px;will-change:transform}
  .partner-logo{flex:0 0 220px;height:84px;border-radius:10px;background:var(--elev-1);border:1px solid var(--border);display:flex;align-items:center;justify-content:center;color:var(--text-muted);font-weight:800}

  .info-body p{margin:0}
  .info-body > *:last-child{margin-bottom:0}
  .onion-wrap + p{margin-top:8px}

  @media (max-width:992px){.grid{grid-template-columns:1fr}.sidebar{position:static}}
  @media (max-width:640px){.header-banners{grid-template-columns:1fr}.info-grid{grid-template-columns:1fr}.card{grid-template-columns:1fr;grid-template-rows:auto auto auto}.card-foot{grid-column:1;grid-row:3;justify-content:flex-start;padding-top:0}}
  </style>
</head>
<body>
  <header>
    <div class="container header-content">
      <div class="logo"><span>‚ú®</span><span id="brand">ServiceHub</span></div>
      <nav>
        <ul>
          <li><a href="#home" class="nav-link active">–ì–ª–∞–≤–Ω–∞—è</a></li>
          <li><a href="#admin" class="nav-link" id="nav-admin" hidden>–ê–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å</a></li>
        </ul>
      </nav>
      <div class="auth" id="auth-box">
        <button class="btn" id="btn-login">–í–æ–π—Ç–∏</button>
        <button class="btn btn-primary" id="btn-register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
      </div>
      <div class="auth hidden" id="user-box">
        <span class="badge">üë§ <b id="u-name"></b></span>
        <button class="btn" id="btn-logout">–í—ã–π—Ç–∏</button>
      </div>
    </div>
  </header>

  <main class="container">
    <div class="notification" role="status" style="margin-top:16px">
      <span>‚ÑπÔ∏è –ü–æ–∫—É–ø–∞–π—Ç–µ —É—Å–ª—É–≥–∏ —Ç–æ–ª—å–∫–æ —É –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤ –∏ —á–∏—Ç–∞–π—Ç–µ –æ—Ç–∑—ã–≤—ã.</span>
      <button class="x" aria-label="–ó–∞–∫—Ä—ã—Ç—å" onclick="this.closest('.notification').remove()">√ó</button>
    </div>

    <div class="ticker" style="margin-top:12px">
      <div class="ticker-track" id="ticker">
        <span>‚úÖ 20 –Ω–æ–≤—ã—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –¥–æ–±–∞–≤–ª–µ–Ω–æ –∑–∞ –Ω–µ–¥–µ–ª—é</span>
        <span>‚≠ê –ú—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º —á–µ—Å—Ç–Ω—ã–µ –æ—Ç–∑—ã–≤—ã</span>
        <span>üöÄ –ù–∞—á–Ω–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ —É–∂–µ —Å–µ–≥–æ–¥–Ω—è</span>
        <span>‚úÖ 20 –Ω–æ–≤—ã—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –¥–æ–±–∞–≤–ª–µ–Ω–æ –∑–∞ –Ω–µ–¥–µ–ª—é</span>
        <span>‚≠ê –ú—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º —á–µ—Å—Ç–Ω—ã–µ –æ—Ç–∑—ã–≤—ã</span>
        <span>üöÄ –ù–∞—á–Ω–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ —É–∂–µ —Å–µ–≥–æ–¥–Ω—è</span>
      </div>
    </div>

    <div class="header-banners">
      <div class="banner-slot">–ó–¥–µ—Å—å –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∞—à–∞ —Ä–µ–∫–ª–∞–º–∞ ‚Äî 578x120</div>
      <div class="banner-slot">–ó–¥–µ—Å—å –º–æ–∂–µ—Ç –±—ã—Ç—å –≤–∞—à–∞ —Ä–µ–∫–ª–∞–º–∞ ‚Äî 578x120</div>
    </div>

    <section class="guarantee" aria-label="–ì–∞—Ä–∞–Ω—Ç–∏–∏ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å">
      <div>
        <h3 style="margin:0 0 6px">–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –∏ —á–µ—Å—Ç–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</h3>
        <p class="muted" style="margin:0">–ú—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã.</p>
        <div class="row" style="gap:8px;margin-top:10px">
          <span class="chip">üîí –ó–∞—â–∏—Ç–∞</span>
          <span class="chip">‚ö° –ë—ã—Å—Ç—Ä—ã–µ –≤—ã–ø–ª–∞—Ç—ã</span>
          <span class="chip">üßæ –ü—Ä–æ–∑—Ä–∞—á–Ω—ã–µ –∫–æ–º–∏—Å—Å–∏–∏</span>
        </div>
      </div>
      <div class="g-actions">
        <button class="btn btn-primary">–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚Üí</button>
        <button class="btn">–ü–æ–¥—Ä–æ–±–Ω–µ–µ</button>
      </div>
    </section>

    <section class="search-section" aria-label="–ü–æ–∏—Å–∫">
      <div class="search-row">
        <input class="field" type="search" placeholder="–ü–æ–∏—Å–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π, —É—Å–ª—É–≥, –∫–∞—Ç–µ–≥–æ—Ä–∏–π‚Ä¶" aria-label="–ü–æ–∏—Å–∫" />
        <button class="btn">–§–∏–ª—å—Ç—Ä—ã</button>
        <button class="btn btn-primary">–ù–∞–π—Ç–∏</button>
      </div>
    </section>

    <div class="grid" style="margin-top:16px">
      <aside class="sidebar">
        <h3>–°—Ç–∞—Ç—É—Å—ã <button class="toggle" data-toggle="#flt">–°–∫—Ä—ã—Ç—å</button></h3>
        <ul id="flt" class="list-plain">
          <li data-status="all" class="active">–í—Å–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</li>
          <li data-status="verified">–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π</li>
          <li data-status="seller">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å</li>
          <li data-status="recruiter">–†–µ–∫—Ä—É—Ç–µ—Ä</li>
          <li data-status="unverified">–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω</li>
        </ul>
        <h3>–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ <button class="toggle" data-toggle="#cats">–°–∫—Ä—ã—Ç—å</button></h3>
        <ul id="cats" class="list-plain">
          <li data-cat="all" class="active">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</li>
          <li data-cat="design">–î–∏–∑–∞–π–Ω</li>
          <li data-cat="programming">–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</li>
          <li data-cat="marketing">–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</li>
          <li data-cat="seo">SEO</li>
          <li data-cat="content">–ö–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥</li>
          <li data-cat="support">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</li>
        </ul>
      </aside>

      <section class="content">
        <div class="section-head">
          <h2 style="margin:0">–°–ø–∏—Å–æ–∫ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π</h2>
          <div>
            <button class="btn btn-primary" id="btn-add-card"><span>Ôºã</span> –î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É</button>
          </div>
        </div>
        <div id="cards" class="cards"></div>
        <div id="empty" class="notice hidden">–ü–æ–∫–∞ –Ω–µ—Ç –∫–∞—Ä—Ç–æ—á–µ–∫. –ù–∞–∂–º–∏—Ç–µ ¬´–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É¬ª.</div>
      </section>
    </div>

    <footer style="margin-top:28px">
      <div class="cta">
        <div>
          <div style="font-weight:800">–ü—Ä–∏—Å–æ–µ–¥–∏–Ω—è–π—Ç–µ—Å—å –∫ –Ω–∞—à–µ–º—É –∫–∞–Ω–∞–ª—É</div>
          <div class="muted">–°–ª–µ–¥–∏—Ç–µ –∑–∞ –Ω–æ–≤–æ—Å—Ç—è–º–∏ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è–º–∏</div>
        </div>
        <div class="count"><span>üë• –ü–æ–¥–ø–∏—Å–∞–ª–æ—Å—å:</span> <b id="tg-count" class="muted">‚Äî</b></div>
        <a class="btn" href="https://t.me/OwnershipDesign" target="_blank" rel="noopener">–ü–æ–¥–ø–∏—Å–∞—Ç—å—Å—è</a>
      </div>

      <div class="info-grid">
        <section class="info-card" aria-label="–ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è">
          <div class="info-head">‚ÑπÔ∏è –û –ø—Ä–æ–µ–∫—Ç–µ</div>
          <div class="info-body">
            <p>ServiceHub ‚Äî —ç—Ç–æ –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏ —Ä–∞–∑–º–µ—â–µ–Ω–∏—è –ª–µ–≥–∞–ª—å–Ω—ã—Ö —É—Å–ª—É–≥.</p>
            <p>–ú—ã –≤—ã—Å—Ç—É–ø–∞–µ–º –∑–∞ —á–µ—Å—Ç–Ω–æ–µ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω–æ—Å—Ç—å.</p>
          </div>
        </section>

        <section class="info-card" aria-label="–ù–∞—à —Å–∞–π—Ç">
          <div class="info-head">üåê –ù–∞—à–∏ —Å–∞–π—Ç—ã</div>
          <div class="info-body">
            <ul class="list-clean">
              <li>üîó <a href="https://servicehub.example" target="_blank" rel="noopener">ServiceHub.example</a></li>
              <li>üîó <a href="https://servicehub.net" target="_blank" rel="noopener">ServiceHub.net</a></li>
              <li>üîó <a href="https://servicehub.org" target="_blank" rel="noopener">ServiceHub.org</a></li>
            </ul>
          </div>
        </section>

        <section class="info-card" aria-label="–†–µ—Å—É—Ä—Å—ã –≤ Telegram">
          <div class="info-head">‚úàÔ∏è –†–µ—Å—É—Ä—Å—ã –≤ Telegram</div>
          <div class="info-body">
            <ul class="list-clean">
              <li>‚úàÔ∏è <a href="https://t.me/servicehub_bot" target="_blank" rel="noopener">@servicehub_bot</a></li>
              <li>‚úàÔ∏è <a href="https://t.me/servicehub_news" target="_blank" rel="noopener">@servicehub_news</a></li>
              <li>‚úàÔ∏è <a href="https://t.me/servicehub_support" target="_blank" rel="noopener">@servicehub_support</a></li>
            </ul>
          </div>
        </section>
      </div>

      <section class="partners">
        <h3>–ù–∞—à–∏ –ø–∞—Ä—Ç–Ω—ë—Ä—ã</h3>
        <div class="partners-slider" role="region" aria-label="–õ–æ–≥–æ—Ç–∏–ø—ã –ø–∞—Ä—Ç–Ω—ë—Ä–æ–≤, –∞–≤—Ç–æ–ø—Ä–æ–∫—Ä—É—Ç–∫–∞">
          <div class="slider-track" id="partners-track">
            <div class="partner-logo">DesignPro</div>
            <div class="partner-logo">CodeCraft</div>
            <div class="partner-logo">MarketGuru</div>
            <div class="partner-logo">SEOExpert</div>
            <div class="partner-logo">SupportPlus</div>
          </div>
        </div>
      </section>
    </footer>
  </main>

  <div class="modal" id="auth-modal">
    <div class="panel">
      <div class="panel-head"><b id="auth-title">–í—Ö–æ–¥</b><button class="x" data-close>√ó</button></div>
      <div class="panel-body">
        <div class="tabs">
          <button class="tab active" data-auth-tab="login">–í—Ö–æ–¥</button>
          <button class="tab" data-auth-tab="register">–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</button>
        </div>
        <div id="auth-forms">
          <div id="form-login">
            <div class="col">
              <label>–õ–æ–≥–∏–Ω</label>
              <input class="field" id="li-user" placeholder="user" />
              <label>–ü–∞—Ä–æ–ª—å</label>
              <input class="field" id="li-pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
              <div class="row" style="justify-content:flex-end">
                <button class="btn btn-primary" id="do-login">–í–æ–π—Ç–∏</button>
              </div>
              <div id="li-err" class="muted" style="color:#f87171"></div>
            </div>
          </div>
          <div id="form-register" class="hidden">
            <div class="col">
              <label>–õ–æ–≥–∏–Ω</label>
              <input class="field" id="rg-user" placeholder="user" />
              <label>–ü–∞—Ä–æ–ª—å</label>
              <input class="field" id="rg-pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
              <div class="row" style="justify-content:flex-end"><button class="btn btn-primary" id="do-register">–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å</button></div>
              <div id="rg-err" class="muted" style="color:#f87171"></div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="card-modal">
    <div class="panel">
      <div class="panel-head"><b id="card-title">–ù–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞</b><button class="x" data-close>√ó</button></div>
      <div class="panel-body">
        <div class="col">
          <label>–ù–∏–∫–Ω–µ–π–º</label>
          <input class="field" id="c-nick" placeholder="nickname" readonly />

          <label>–ê–≤–∞—Ç–∞—Ä</label>
          <div class="row" style="gap:12px;align-items:flex-start">
            <div class="avatar" id="c-ava-preview" aria-label="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä" title="–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä" style="width:56px;height:56px">?</div>
            <div class="col" style="flex:1 1 auto">
              <input class="field" id="c-ava-file" type="file" accept="image/*" style="padding:8px" />
              <input class="field" id="c-ava-url" placeholder="https://... (–∏–ª–∏ –æ—Å—Ç–∞–≤—å—Ç–µ –ø—É—Å—Ç—ã–º)" />
            </div>
          </div>

          <label>–û–ø–∏—Å–∞–Ω–∏–µ —É—Å–ª—É–≥</label>
          <textarea class="field" id="c-desc" rows="3" placeholder="–ö—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è‚Ä¶"></textarea>
          <label>–ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</label>
          <select class="select" id="c-cat">
            <option value="design">–î–∏–∑–∞–π–Ω</option>
            <option value="programming">–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ</option>
            <option value="marketing">–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥</option>
            <option value="seo">SEO</option>
            <option value="content">–ö–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥</option>
            <option value="support">–ü–æ–¥–¥–µ—Ä–∂–∫–∞</option>
          </select>

          <label>–û–ø—ã—Ç —Ä–∞–±–æ—Ç—ã (–¥–µ–ø–æ–∑–∏—Ç)</label>
          <input class="field" id="c-deposits" placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: —Ñ—Ä–∏–ª–∞–Ω—Å: 3 –≥–æ–¥–∞; —Å—Ç—É–¥–∏—è: 2 –≥–æ–¥–∞" />

          <label>–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—Å–ø–µ—à–Ω—ã—Ö –ø—Ä–æ–µ–∫—Ç–æ–≤</label>
          <input class="field" id="c-deals" type="number" min="0" step="1" placeholder="0" />

          <label>–ö–æ–Ω—Ç–∞–∫—Ç Telegram</label>
          <input class="field" id="c-tg" placeholder="@username" />

          <label>–°—Å—ã–ª–∫–∏ –Ω–∞ –ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ</label>
          <div id="c-forums-list" class="col" style="gap:8px"></div>
          <div class="row" style="justify-content:flex-end;gap:8px">
            <button class="btn" type="button" id="forum-add">–î–æ–±–∞–≤–∏—Ç—å —Å—Å—ã–ª–∫—É</button>
          </div>

          <div class="row" style="justify-content:flex-end;gap:8px">
            <button class="btn" data-close>–û—Ç–º–µ–Ω–∞</button>
            <button class="btn btn-primary" id="c-save">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="modal" id="admin-modal">
    <div class="panel">
      <div class="panel-head"><b>–ê–¥–º–∏–Ω‚Äë–ø–∞–Ω–µ–ª—å</b><button class="x" data-close>√ó</button></div>
      <div class="panel-body">
        <div class="tabs">
          <button class="tab active" data-admin-tab="sellers">–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏</button>
          <button class="tab" data-admin-tab="users">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏</button>
          <button class="tab" data-admin-tab="settings">–ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
        </div>
        <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–¥–∞–≤—Ü–∞–º–∏ (–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è–º–∏) -->
        <div id="admin-sellers">
          <div id="seller-filters" class="row" style="flex-wrap: wrap; gap: 12px; margin-bottom: 12px"></div>
          <div id="seller-bulk-actions" class="row" style="flex-wrap: wrap; gap: 12px; margin-bottom: 12px"></div>
          <table class="table" id="tbl-sellers">
            <thead>
              <tr>
                <th><input type="checkbox" id="sel-all-sellers"></th>
                <th>–ù–∞–∑–≤–∞–Ω–∏–µ</th>
                <th>–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
                <th>–°—Ç–∞—Ç—É—Å</th>
                <th>Telegram</th>
                <th>–°–¥–µ–ª–∫–∏</th>
                <th>–î–∞—Ç–∞</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <!-- –ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ -->
        <div id="admin-users" class="hidden">
          <table class="table" id="tbl-users">
            <thead>
              <tr>
                <th>–õ–æ–≥–∏–Ω</th>
                <th>–†–æ–ª—å</th>
                <th>–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
                <th>–î–µ–π—Å—Ç–≤–∏—è</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
        </div>
        <!-- –ü–∞–Ω–µ–ª—å –Ω–∞—Å—Ç—Ä–æ–µ–∫ -->
        <div id="admin-settings" class="hidden">
          <div class="col" style="gap:16px">
            <!-- –ë–∞–Ω–Ω–µ—Ä—ã -->
            <section>
              <h4>–ë–∞–Ω–Ω–µ—Ä—ã –≤ —à–∞–ø–∫–µ</h4>
              <div class="col" style="gap:12px" id="banner-settings">
                <div class="col" style="gap:6px">
                  <label><b>–°–ª–æ—Ç 1</b></label>
                  <input type="file" id="banner-file-1" accept="image/*" />
                  <input class="field" id="banner-url-1" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" />
                  <input class="field" id="banner-link-1" placeholder="–°—Å—ã–ª–∫–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ" />
                  <div id="banner-preview-1" class="muted" style="font-size:12px"></div>
                </div>
                <div class="col" style="gap:6px">
                  <label><b>–°–ª–æ—Ç 2</b></label>
                  <input type="file" id="banner-file-2" accept="image/*" />
                  <input class="field" id="banner-url-2" placeholder="URL –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" />
                  <input class="field" id="banner-link-2" placeholder="–°—Å—ã–ª–∫–∞ –ø—Ä–∏ –∫–ª–∏–∫–µ" />
                  <div id="banner-preview-2" class="muted" style="font-size:12px"></div>
                </div>
              </div>
            </section>
            <!-- –ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ -->
            <section>
              <h4>–ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞</h4>
              <label>–≠–ª–µ–º–µ–Ω—Ç—ã (–∫–∞–∂–¥—ã–π –ø—É–Ω–∫—Ç —Å –Ω–æ–≤–æ–π —Å—Ç—Ä–æ–∫–∏):</label>
              <textarea class="field" id="ticker-items" rows="3"></textarea>
              <label>–°–∫–æ—Ä–æ—Å—Ç—å (—Å–µ–∫—É–Ω–¥—ã, –±–æ–ª—å—à–µ = –º–µ–¥–ª–µ–Ω–Ω–µ–µ):</label>
              <input class="field" id="ticker-speed" type="number" min="5" step="1" />
            </section>
            <!-- –ü–∞–ª–∏—Ç—Ä–∞ -->
            <section>
              <h4>–ü–∞–ª–∏—Ç—Ä–∞</h4>
              <div class="row" style="gap:8px;flex-wrap:wrap">
                <div class="col" style="gap:4px">
                  <label>–û—Å–Ω–æ–≤–Ω–æ–π —Ü–≤–µ—Ç</label>
                  <input type="color" id="palette-accent" />
                </div>
                <div class="col" style="gap:4px">
                  <label>–¢—ë–º–Ω—ã–π –æ—Ç—Ç–µ–Ω–æ–∫</label>
                  <input type="color" id="palette-accent-dark" />
                </div>
                <div class="col" style="gap:4px">
                  <label>–°–≤–µ—Ç–ª—ã–π –æ—Ç—Ç–µ–Ω–æ–∫</label>
                  <input type="color" id="palette-accent2" />
                </div>
              </div>
            </section>
            <!-- –≠–∫—Å–ø–æ—Ä—Ç/–ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö -->
            <section>
              <h4>–≠–∫—Å–ø–æ—Ä—Ç / –ò–º–ø–æ—Ä—Ç –¥–∞–Ω–Ω—ã—Ö</h4>
              <button class="btn" id="export-json">–≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
              <textarea class="field" id="json-data" rows="4" placeholder="–î–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∑–¥–µ—Å—å" readonly></textarea>
              <label>–í—Å—Ç–∞–≤—å—Ç–µ JSON –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞:</label>
              <textarea class="field" id="json-import" rows="3" placeholder="{"sellers": [...], "users": [...], "settings": {...}}"></textarea>
              <button class="btn btn-primary" id="import-json">–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
            </section>
            <!-- –ì–∞—Ä–∞–Ω—Ç–∏–∏ -->
            <section>
              <h4>–¢–µ–∫—Å—Ç—ã —Å–µ–∫—Ü–∏–∏ –≥–∞—Ä–∞–Ω—Ç–∏–π</h4>
              <label>–ó–∞–≥–æ–ª–æ–≤–æ–∫</label>
              <input class="field" id="guarantee-title" />
              <label>–ü–æ–¥–∑–∞–≥–æ–ª–æ–≤–æ–∫</label>
              <input class="field" id="guarantee-subtitle" />
            </section>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –æ—Ç–¥–µ–ª—å–Ω—ã–µ –∫–ª—é—á–∏ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è —Ç—ë–º–Ω–æ–π —Ç–µ–º—ã,
  // —á—Ç–æ–±—ã –Ω–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤–∞—Ç—å —Å –¥–∞–Ω–Ω—ã–º–∏ —Å–≤–µ—Ç–ª–æ–π –≤–µ—Ä—Å–∏–∏
  const LS = { users:'sd_users', session:'sd_session', sellers:'sd_sellers' };
  function read(key, def){ try{ const raw = localStorage.getItem(key); const v = raw==null? undefined : JSON.parse(raw); return v!==undefined? v: def; }catch(e){ return def; } }
  function write(key, val){ localStorage.setItem(key, JSON.stringify(val)); }

  // –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å —á–µ–ª–æ–≤–µ–∫–æ—á–∏—Ç–∞–µ–º—ã–º–∏ –Ω–∞–∑–≤–∞–Ω–∏—è–º–∏
  const CAT_LABELS = {
    design:'–î–∏–∑–∞–π–Ω',
    programming:'–ü—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏–µ',
    marketing:'–ú–∞—Ä–∫–µ—Ç–∏–Ω–≥',
    seo:'SEO',
    content:'–ö–æ–ø–∏—Ä–∞–π—Ç–∏–Ω–≥',
    support:'–ü–æ–¥–¥–µ—Ä–∂–∫–∞'
  };
  function catLabel(v){ return CAT_LABELS[v] || v || '‚Äî'; }
  function statusLabel(v){ return ({verified:'–ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–π', seller:'–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å', recruiter:'–†–µ–∫—Ä—É—Ç–µ—Ä', unverified:'–ù–µ –ø—Ä–æ–≤–µ—Ä–µ–Ω'})[v] || '–ò—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å'; }

  // –ö–ª—é—á –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∏ –∑–Ω–∞—á–µ–Ω–∏—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
  const SETTINGS_KEY = 'sd_settings';
  const DEFAULT_SETTINGS = {
    ticker: {
      items: [
        '‚úÖ 20 –Ω–æ–≤—ã—Ö –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–π –¥–æ–±–∞–≤–ª–µ–Ω–æ –∑–∞ –Ω–µ–¥–µ–ª—é',
        '‚≠ê –ú—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º —á–µ—Å—Ç–Ω—ã–µ –æ—Ç–∑—ã–≤—ã',
        'üöÄ –ù–∞—á–Ω–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏—á–µ—Å—Ç–≤–æ —É–∂–µ —Å–µ–≥–æ–¥–Ω—è'
      ],
      speed: 28
    },
    banners: {
      slots: [
        {src:'', link:''},
        {src:'', link:''}
      ]
    },
    palette: {
      accent:'',
      accentDark:'',
      accent2:''
    },
    guarantee: {
      title:'–ë–µ–∑–æ–ø–∞—Å–Ω—ã–µ —Å–¥–µ–ª–∫–∏ –∏ —á–µ—Å—Ç–Ω—ã–µ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–∏',
      subtitle:'–ú—ã –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏ –∏ –ø—Ä–æ–∑—Ä–∞—á–Ω—ã–µ —É—Å–ª–æ–≤–∏—è —Ä–∞–±–æ—Ç—ã.'
    }
  };

  function getSettings(){
    const st = read(SETTINGS_KEY, null);
    if(!st) return JSON.parse(JSON.stringify(DEFAULT_SETTINGS));
    // –≥–ª—É–±–æ–∫–æ–µ —Å–ª–∏—è–Ω–∏–µ –ø–æ –∫–ª—é—á–∞–º –≤–µ—Ä—Ö–Ω–µ–≥–æ —É—Ä–æ–≤–Ω—è
    const res = JSON.parse(JSON.stringify(DEFAULT_SETTINGS));
    if(st.ticker){ res.ticker.items = Array.isArray(st.ticker.items)? st.ticker.items: res.ticker.items; res.ticker.speed = st.ticker.speed||res.ticker.speed; }
    if(st.banners && Array.isArray(st.banners.slots)){
      res.banners.slots = st.banners.slots.map((it,i)=>{
        const defSlot = {src:'',link:''};
        return Object.assign({}, defSlot, it||{});
      });
    }
    if(st.palette){ res.palette.accent = st.palette.accent||res.palette.accent; res.palette.accentDark = st.palette.accentDark||res.palette.accentDark; res.palette.accent2 = st.palette.accent2||res.palette.accent2; }
    if(st.guarantee){ res.guarantee.title = st.guarantee.title||res.guarantee.title; res.guarantee.subtitle = st.guarantee.subtitle||res.guarantee.subtitle; }
    return res;
  }
  function saveSettings(s){ write(SETTINGS_KEY, s); }

  // –ü—Ä–∏–º–µ–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∫ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
  function applySettings(){
    const st = getSettings();
    // –ü–∞–ª–∏—Ç—Ä–∞: –µ—Å–ª–∏ –Ω–µ –∑–∞–¥–∞–Ω—ã –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö, –±–µ—Ä–µ–º –∏–∑ CSS root
    const rootStyles = getComputedStyle(document.documentElement);
    const accent = st.palette.accent || rootStyles.getPropertyValue('--accent').trim();
    const accentDark = st.palette.accentDark || rootStyles.getPropertyValue('--accent-dark').trim();
    const accent2 = st.palette.accent2 || rootStyles.getPropertyValue('--accent-2').trim();
    document.documentElement.style.setProperty('--accent', accent);
    document.documentElement.style.setProperty('--accent-dark', accentDark);
    document.documentElement.style.setProperty('--accent-2', accent2);
    // –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–ª—å—Ü–æ –¥–ª—è —Ñ–æ–∫—É—Å–∞
    document.documentElement.style.setProperty('--ring', accent2);
    document.documentElement.style.setProperty('--ring-soft', `rgba(${hexToRgb(accent2)},.25)`);
    // –ë–∞–Ω–Ω–µ—Ä—ã
    const banners = st.banners && st.banners.slots? st.banners.slots : [];
    banners.forEach((slot,i)=>{
      const slotEl = document.querySelectorAll('.banner-slot')[i];
      if(slotEl){
        if(slot.src){
          const linkStart = slot.link? `<a href="${escapeHTML(slot.link)}" target="_blank" rel="noopener">`: '';
          const linkEnd = slot.link? '</a>': '';
          slotEl.innerHTML = `${linkStart}<img src="${escapeHTML(slot.src)}" alt="–±–∞–Ω–Ω–µ—Ä" style="max-width:100%;height:auto;border-radius:10px">${linkEnd}`;
        }
      }
    });
    // –ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞
    const tickerTrack = document.getElementById('ticker');
    if(tickerTrack){
      const items = Array.isArray(st.ticker.items)? st.ticker.items: DEFAULT_SETTINGS.ticker.items;
      tickerTrack.innerHTML = '';
      items.forEach(it=>{ const span=document.createElement('span'); span.textContent=it; tickerTrack.appendChild(span); });
      // –¥—É–±–ª–∏—Ä–æ–≤–∞—Ç—å –¥–ª—è –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ–π –ª–µ–Ω—Ç—ã
      items.forEach(it=>{ const span=document.createElement('span'); span.textContent=it; tickerTrack.appendChild(span); });
      // —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–∫–æ—Ä–æ—Å—Ç—å –∫–∞–∫ CSS custom property
      tickerTrack.style.setProperty('--t', st.ticker.speed+'s');
    }
    // –ì–∞—Ä–∞–Ω—Ç–∏—è
    const gTitleEl = document.querySelector('.guarantee h3');
    const gSubEl = document.querySelector('.guarantee p.muted');
    if(gTitleEl) gTitleEl.textContent = st.guarantee.title;
    if(gSubEl) gSubEl.textContent = st.guarantee.subtitle;
    // –ó–∞–ø–æ–ª–Ω–∏—Ç—å —Ñ–æ—Ä–º—ã –Ω–∞—Å—Ç—Ä–æ–µ–∫ (–µ—Å–ª–∏ —Å—É—â–µ—Å—Ç–≤—É—é—Ç)
    // –±–∞–Ω–Ω–µ—Ä—ã
    const fileInputs = [document.getElementById('banner-file-1'), document.getElementById('banner-file-2')];
    const urlInputs = [document.getElementById('banner-url-1'), document.getElementById('banner-url-2')];
    const linkInputs = [document.getElementById('banner-link-1'), document.getElementById('banner-link-2')];
    const previewEls = [document.getElementById('banner-preview-1'), document.getElementById('banner-preview-2')];
    for(let i=0;i<2;i++){
      const slot = banners[i]||{};
      if(urlInputs[i]) urlInputs[i].value = slot.src && !slot.src.startsWith('data:')? slot.src: '';
      if(linkInputs[i]) linkInputs[i].value = slot.link || '';
      if(previewEls[i]){
        if(slot.src){ previewEls[i].innerHTML = `<img src="${escapeHTML(slot.src)}" alt="–±–∞–Ω–Ω–µ—Ä" style="max-width:100%;height:auto;border-radius:6px">`; }
        else{ previewEls[i].innerHTML=''; }
      }
    }
    // –±–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ —Ñ–æ—Ä–º—ã
    const tickerItemsInput = document.getElementById('ticker-items');
    const tickerSpeedInput = document.getElementById('ticker-speed');
    if(tickerItemsInput) tickerItemsInput.value = (st.ticker.items||[]).join('\n');
    if(tickerSpeedInput) tickerSpeedInput.value = st.ticker.speed;
    // –ø–∞–ª–∏—Ç—Ä–∞ —Ñ–æ—Ä–º—ã
    const palAccent = document.getElementById('palette-accent');
    const palDark = document.getElementById('palette-accent-dark');
    const pal2 = document.getElementById('palette-accent2');
    if(palAccent) palAccent.value = toHex(accent);
    if(palDark) palDark.value = toHex(accentDark);
    if(pal2) pal2.value = toHex(accent2);
    // –≥–∞—Ä–∞–Ω—Ç–∏—è —Ñ–æ—Ä–º—ã
    const gTitleInput = document.getElementById('guarantee-title');
    const gSubtitleInput = document.getElementById('guarantee-subtitle');
    if(gTitleInput) gTitleInput.value = st.guarantee.title;
    if(gSubtitleInput) gSubtitleInput.value = st.guarantee.subtitle;
  }

  // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: –ø—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ HEX –≤ RGB –∏ –æ–±—Ä–∞—Ç–Ω–æ
  function hexToRgb(hex){
    hex = hex.replace('#','');
    if(hex.length===3){ hex = hex.split('').map(c=>c+c).join(''); }
    const num = parseInt(hex,16);
    return `${(num>>16)&255},${(num>>8)&255},${num&255}`;
  }
  function toHex(col){
    // –ü—Ä–∏–Ω–∏–º–∞–µ—Ç —Ü–≤–µ—Ç –≤ —Ñ–æ—Ä–º–∞—Ç–µ rgb(...) –∏–ª–∏ hex; –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç hex
    col = col.trim();
    if(col.startsWith('#')) return col;
    const m = col.match(/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/i);
    if(m){ const r=Number(m[1]); const g=Number(m[2]); const b=Number(m[3]); const toHex=x=>x.toString(16).padStart(2,'0'); return `#${toHex(r)}${toHex(g)}${toHex(b)}`; }
    return col;
  }

  // –ü–µ—Ä–≤–∏—á–Ω–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞, –≤–∫–ª—é—á–∞—è –¥–∞—Ç—É —Å–æ–∑–¥–∞–Ω–∏—è –∏ —Ñ–ª–∞–≥ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∏
  (function seed(){
    const now = new Date().toISOString();
    const usersSeed = [
      {u:'admin',p:'admin',role:'admin',created: now},
      {u:'user',p:'user',role:'user',created: now}
    ];
    const sellersSeed = [
      {id:1,name:'WebDesignPro',nick:'admin',desc:'–°–æ–∑–¥–∞—é —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –∏ –∞–¥–∞–ø—Ç–∏–≤–Ω—ã–µ —Å–∞–π—Ç—ã. –û–ø—ã—Ç –±–æ–ª–µ–µ 5 –ª–µ—Ç.',cat:'design',status:'verified',flags:{verified:true,escrow:true,rating4:true},avatar:'',deposits:'—Ñ—Ä–∏–ª–∞–Ω—Å: 5 –ª–µ—Ç',deals:42,tg:'@webdesignpro',forums:[{title:'Behance',url:'https://behance.net/user1'},{title:'Dribbble',url:'https://dribbble.com/user1'}],created: now,blocked:false},
      {id:2,name:'CodeMaster',nick:'user',desc:'–†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±‚Äë–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π –ø–æ–¥ –∫–ª—é—á. Node.js, Python.',cat:'programming',status:'seller',flags:{verified:true,escrow:false,rating4:true},avatar:'',deposits:'—Å—Ç—É–¥–∏—è: 3 –≥–æ–¥–∞',deals:15,tg:'@codemaster',forums:[{title:'GitHub',url:'https://github.com/user2'}],created: now,blocked:false},
      {id:3,name:'MarketGuru',nick:'user',desc:'–ü–æ–º–æ–≥–∞—é –∫–æ–º–ø–∞–Ω–∏—è–º —Ä–∞—Å—Ç–∏ —Å –ø–æ–º–æ—â—å—é —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞—Ä–∫–µ—Ç–∏–Ω–≥–∞.',cat:'marketing',status:'unverified',flags:{verified:false,escrow:false,rating4:false},avatar:'',deposits:'‚Äî',deals:0,tg:'@marketguru',forums:[],created: now,blocked:false},
      {id:4,name:'SEOExpert',nick:'admin',desc:'–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–∞–π—Ç–æ–≤ –¥–ª—è –ø–æ–∏—Å–∫–æ–≤—ã—Ö —Å–∏—Å—Ç–µ–º. –ê–Ω–∞–ª–∏—Ç–∏–∫–∞ —Ç—Ä–∞—Ñ–∏–∫–∞.',cat:'seo',status:'recruiter',flags:{verified:true,escrow:false,rating4:true},avatar:'',deposits:'–∞–≥–µ–Ω—Ç—Å—Ç–≤–æ: 4 –≥–æ–¥–∞',deals:7,tg:'@seoexpert',forums:[{title:'Portfolio',url:'https://portfolio.example/seoexpert'}],created: now,blocked:false}
    ];
    const existingUsers = read(LS.users);
    if(!Array.isArray(existingUsers) || existingUsers.length===0) write(LS.users, usersSeed);
    const existingSellers = read(LS.sellers);
    if(!Array.isArray(existingSellers) || existingSellers.length===0) write(LS.sellers, sellersSeed);
  })();

  const authBox = document.getElementById('auth-box');
  const userBox = document.getElementById('user-box');
  const uName = document.getElementById('u-name');
  const navAdmin = document.getElementById('nav-admin');

  function getSession(){ return read(LS.session,null); }
  function setSession(s){ if(s) write(LS.session,s); else localStorage.removeItem(LS.session); syncAuth(); }

  function syncAuth(){
    const s = getSession();
    if(s){ authBox.classList.add('hidden'); userBox.classList.remove('hidden'); uName.textContent = s.u + (s.role==='admin'? ' (admin)':'' ); navAdmin.hidden = s.role!=='admin'; }
    else { userBox.classList.add('hidden'); authBox.classList.remove('hidden'); navAdmin.hidden = true; }
  }
  syncAuth();

  const cardsWrap = document.getElementById('cards');
  const emptyHint = document.getElementById('empty');
  let currentFilter = {status:'all',cat:'all'};

  function escapeHTML(s){ return (s+'').replace(/[&<>"']/g, m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m])); }

  function cardHTML(s){
    // –æ—Ç–æ–±—Ä–∞–∂–∞–µ–º –∞–≤–∞—Ç–∞—Ä, –∏–º—è, –æ–ø–∏—Å–∞–Ω–∏–µ –∏ –æ–¥–∏–Ω —Å—Ç–∞—Ç—É—Å (–±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ñ–ª–∞–≥–æ–≤)
    const ava = s.avatar? `<img src="${escapeHTML(s.avatar)}" alt="">` : (escapeHTML((s.name||'?')[0]||'?'));
    const forumChips = (Array.isArray(s.forums)? s.forums: []).slice(0,2).map(it=>{
      const t = escapeHTML(it.title||'–°—Å—ã–ª–∫–∞');
      const u = escapeHTML(it.url||'#');
      return `<a class="link-chip" href="${u}" target="_blank" rel="noopener">üîó ${t}</a>`;
    }).join('');
    const tgLink = s.tg? `https://t.me/${escapeHTML(String(s.tg).replace(/^@/,''))}` : '';
    return `<article class="card">
      <div class="card-head">
        <div class="avatar">${ava}</div>
        <div style="min-width:0">
          <div style="font-weight:800">${escapeHTML(s.name)}</div>
          <div class="muted" style="white-space:nowrap;overflow:hidden;text-overflow:ellipsis">${escapeHTML(s.desc||'')}</div>
          <div class="row" style="gap:6px;margin-top:6px">
            <span class="chip">${escapeHTML(statusLabel(s.status))}</span>
          </div>
          <div class="row" style="gap:6px;margin-top:8px;flex-wrap:wrap">${forumChips}</div>
        </div>
      </div>
      <div class="card-foot">
        <button class="btn" data-profile="${s.id}">–ü—Ä–æ—Ñ–∏–ª—å</button>
        ${tgLink? `<a class="btn btn-primary" href="${tgLink}" target="_blank" rel="noopener">–°–≤—è–∑–∞—Ç—å—Å—è</a>`: '<button class="btn btn-primary" disabled>–°–≤—è–∑–∞—Ç—å—Å—è</button>'}
      </div>
    </article>`;
  }

  function renderCards(){
    const list = read(LS.sellers,[]).filter(s=>{
      // –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
      if(s.blocked) return false;
      const statusOk = currentFilter.status==='all' || s.status===currentFilter.status;
      const catOk = currentFilter.cat==='all' || s.cat===currentFilter.cat;
      return statusOk && catOk;
    });
    cardsWrap.innerHTML = list.map(cardHTML).join('');
    emptyHint.classList.toggle('hidden', list.length>0);
  }
  renderCards();

  document.querySelectorAll('.toggle').forEach(btn=>{
    btn.addEventListener('click',()=>{ const target = document.querySelector(btn.dataset.toggle); if(!target) return; target.hidden = !target.hidden; btn.textContent = target.hidden? '–ü–æ–∫–∞–∑–∞—Ç—å':'–°–∫—Ä—ã—Ç—å'; });
  });
  document.querySelectorAll('#flt li').forEach(li=>{
    li.addEventListener('click',()=>{ document.querySelectorAll('#flt li').forEach(x=>x.classList.remove('active')); li.classList.add('active'); currentFilter.status = li.dataset.status; renderCards(); });
  });
  document.querySelectorAll('#cats li').forEach(li=>{
    li.addEventListener('click',()=>{ document.querySelectorAll('#cats li').forEach(x=>x.classList.remove('active')); li.classList.add('active'); currentFilter.cat = li.dataset.cat; renderCards(); });
  });

  const cardModal = document.getElementById('card-modal');
  function openModal(m){ m.classList.add('open'); }
  function closeModal(m){ m.classList.remove('open'); }
  document.querySelectorAll('[data-close]').forEach(b=> b.addEventListener('click',e=> closeModal(e.target.closest('.modal'))));
  function id(x){ return document.getElementById(x); }

  document.getElementById('btn-add-card').addEventListener('click',()=>{
    if(!getSession()) return openAuth('login');
    // –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –Ω–æ–≤–æ–π –∫–∞—Ä—Ç–æ—á–∫–∏ —Å–±—Ä–∞—Å—ã–≤–∞–µ–º —Ç–µ–∫—É—â–∏–π —Ä–µ–∂–∏–º —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
    currentEditingId = null;
    id('c-nick').value = getSession().u;
    id('c-ava-file').value = '';
    id('c-ava-url').value='';
    id('c-ava-preview').innerHTML='?';
    delete id('c-ava-preview').dataset.src;
    const list = id('c-forums-list');
    if(list){ list.innerHTML=''; addForumRow(); }
    // –∑–∞–≥–æ–ª–æ–≤–æ–∫ –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞
    const ct = document.getElementById('card-title'); if(ct) ct.textContent = '–ù–æ–≤–∞—è –∫–∞—Ä—Ç–æ—á–∫–∞';
    openModal(cardModal);
  });

  function fileToDataURL(file){ return new Promise((res,rej)=>{ const fr=new FileReader(); fr.onload=()=>res(fr.result); fr.onerror=rej; fr.readAsDataURL(file); }); }
  id('c-ava-file').addEventListener('change', async (e)=>{ const f=e.target.files&&e.target.files[0]; if(!f) return; const url = await fileToDataURL(f); const prev = id('c-ava-preview'); prev.innerHTML = `<img src="${url}" alt="">`; id('c-ava-url').value=''; prev.dataset.src=url; });
  id('c-ava-url').addEventListener('input',()=>{ const v=id('c-ava-url').value.trim(); const prev=id('c-ava-preview'); if(v){ prev.innerHTML = `<img src="${v}" alt="">`; prev.dataset.src=v; }else{ prev.innerHTML='?'; delete prev.dataset.src; } });

  function normalizeURL(u){ u=(u||'').trim(); if(!u) return ''; try{ const url=new URL(u, window.location.origin); if(url.protocol==='http:'||url.protocol==='https:') return url.href; return ''; }catch(e){ try{ const url=new URL('https://'+u); return url.href; }catch(_){ return ''; } } }
  function addForumRow(title='', url=''){
    const list = id('c-forums-list'); if(!list) return;
    const row = document.createElement('div'); row.className='forum-row';
    row.innerHTML = `
      <input class="field forum-title" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞" value="${escapeHTML(title)}" />
      <input class="field forum-url" placeholder="https://—Å—Å—ã–ª–∫–∞-–Ω–∞-–ø–æ—Ä—Ç—Ñ–æ–ª–∏–æ" value="${escapeHTML(url)}" />
      <button class="btn rm" type="button">‚úï</button>`;
    row.querySelector('.rm').addEventListener('click',()=>{ row.remove(); });
    list.appendChild(row);
  }
  function collectForums(){
    const list = id('c-forums-list'); if(!list) return [];
    const rows = Array.from(list.querySelectorAll('.forum-row'));
    return rows.map(r=>{
      const t = (r.querySelector('.forum-title')?.value||'').trim();
      const u = normalizeURL(r.querySelector('.forum-url')?.value||'');
      return {title:t, url:u};
    }).filter(it=> it.title && it.url);
  }
  const btnForumAdd = document.getElementById('forum-add'); if(btnForumAdd) btnForumAdd.addEventListener('click',()=> addForumRow());

  id('c-save').addEventListener('click',()=>{
    const s = getSession(); if(!s) return;
    const name = (id('c-nick').value || s.u).trim();
    const desc = id('c-desc').value.trim();
    const cat = id('c-cat').value;
    // –¥–ª—è –Ω–æ–≤–æ–≥–æ –≤—Å–µ–≥–¥–∞ —Å—Ç–∞—Ç—É—Å unverified, –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä—É–µ–º–æ–≥–æ –æ—Å—Ç–∞–≤–ª—è–µ–º —Å—Ç–∞—Ä—ã–π
    const avatar = id('c-ava-preview').dataset.src||'';
    const deposits = id('c-deposits').value.trim();
    const deals = Math.max(0, parseInt(id('c-deals').value||'0',10))||0;
    const tg = id('c-tg').value.trim();
    const forums = collectForums();
    const arr = read(LS.sellers,[]);
    if(currentEditingId){
      // –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏
      const item = arr.find(x=> x.id===currentEditingId);
      if(item){
        item.name = name;
        item.desc = desc;
        item.cat = cat;
        item.avatar = avatar;
        item.deposits = deposits;
        item.deals = deals;
        item.tg = tg;
        item.forums = forums;
        // flags –∏ —Å—Ç–∞—Ç—É—Å –Ω–µ –º–µ–Ω—è–µ–º –∑–¥–µ—Å—å
        write(LS.sellers,arr);
      }
      currentEditingId = null;
    } else {
      // –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–π
      const idnew = (arr.reduce((m,x)=>Math.max(m,x.id),0)||0)+1;
      const status = 'unverified';
      const flags = {verified:false, escrow:false, rating4:false};
      arr.push({id:idnew,name,nick:s.u,desc,cat,status,flags,avatar,deposits,deals,tg,forums,created:new Date().toISOString(),blocked:false});
      write(LS.sellers,arr);
    }
    closeModal(cardModal);
    // —Å–±—Ä–æ—Å–∏—Ç—å –ø–æ–ª—è —Ñ–æ—Ä–º—ã
    ['c-desc','c-ava-url','c-deposits','c-deals','c-tg'].forEach(k=>{ const el=id(k); if(!el) return; if(el.type==='checkbox') el.checked=false; else el.value=''; });
    id('c-cat').value='design'; id('c-ava-preview').innerHTML='?'; delete id('c-ava-preview').dataset.src; const lst=id('c-forums-list'); if(lst) lst.innerHTML='';
    renderCards();
    if(id('admin-modal').classList.contains('open')) fillAdminTables();
  });

  const authModal = id('auth-modal');
  const tabs = document.querySelectorAll('[data-auth-tab]');
  tabs.forEach(t=> t.addEventListener('click',()=>{ tabs.forEach(x=>x.classList.remove('active')); t.classList.add('active'); id('form-login').classList.toggle('hidden', t.dataset.authTab!=='login'); id('form-register').classList.toggle('hidden', t.dataset.authTab!=='register'); id('auth-title').textContent = t.dataset.authTab==='login'? '–í—Ö–æ–¥':'–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è'; }));

  document.getElementById('btn-login').addEventListener('click',()=> openAuth('login'));
  document.getElementById('btn-register').addEventListener('click',()=> openAuth('register'));
  function openAuth(mode){ const to = mode==='register'? 'register':'login'; tabs.forEach(t=> t.classList.toggle('active', t.dataset.authTab===to)); id('form-login').classList.toggle('hidden', to!=='login'); id('form-register').classList.toggle('hidden', to!=='register'); id('auth-title').textContent = to==='login'? '–í—Ö–æ–¥':'–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è'; openModal(authModal); }

  document.getElementById('do-register').addEventListener('click',()=>{
    const u = id('rg-user').value.trim();
    const p = id('rg-pass').value;
    const err = id('rg-err');
    err.textContent='';
    if(!u || !p){ err.textContent='–ó–∞–ø–æ–ª–Ω–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å'; return; }
    const users = read(LS.users,[]);
    if(users.some(x=>x.u===u)){ err.textContent='–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç'; return; }
    const role='user';
    users.push({u,p,role,created:new Date().toISOString()});
    write(LS.users,users);
    setSession({u,role});
    closeModal(authModal);
    syncAuth();
  });
  document.getElementById('do-login').addEventListener('click',()=>{ const u = id('li-user').value.trim(); const p = id('li-pass').value; const err = id('li-err'); err.textContent=''; const users = read(LS.users,[]); const found = users.find(x=>x.u===u && x.p===p); if(!found){ err.textContent='–ù–µ–≤–µ—Ä–Ω—ã–µ –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å'; return; } setSession({u:found.u,role:found.role}); closeModal(authModal); });
  document.getElementById('btn-logout').addEventListener('click',()=>{ setSession(null); });

  const adminModal = id('admin-modal');
  document.getElementById('nav-admin').addEventListener('click', (e)=>{ e.preventDefault(); if(getSession()?.role!=='admin') return alert('–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –ø—Ä–∞–≤'); openModal(adminModal); fillAdminTables(); });
  const adminTabs = document.querySelectorAll('[data-admin-tab]');
  adminTabs.forEach(t=> t.addEventListener('click',()=>{
    adminTabs.forEach(x=>x.classList.remove('active'));
    t.classList.add('active');
    const tab = t.dataset.adminTab;
    id('admin-sellers').classList.toggle('hidden', tab!=='sellers');
    id('admin-users').classList.toggle('hidden', tab!=='users');
    id('admin-settings').classList.toggle('hidden', tab!=='settings');
    if(tab==='sellers'){ fillAdminSellers(); }
    if(tab==='users'){ fillAdminUsers(); }
    if(tab==='settings'){ fillAdminSettings(); }
  }));

  // –ì–ª–æ–±–∞–ª—å–Ω—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤ –∏ –≤—ã–±–æ—Ä–∞ –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
  let sellerFilter = {nick:'', tg:'', cat:'all', status:'all'};
  let sellerSelection = new Set();
  let currentEditingId = null;

  // –û—Ç–∫—Ä—ã—Ç—å –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–≥–æ –ø—Ä–æ–¥–∞–≤—Ü–∞
  // –ü—Ä–∏ –≤—ã–∑–æ–≤–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è currentEditingId –∏ –∑–∞–ø–æ–ª–Ω—è—é—Ç—Å—è –ø–æ–ª—è —Ñ–æ—Ä–º—ã
  function openEditSeller(idd){
    const arr = read(LS.sellers, []);
    const item = arr.find(x => x.id === idd);
    if(!item) return;
    currentEditingId = item.id;
    const titleEl = document.getElementById('card-title');
    if(titleEl) titleEl.textContent = '–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞—Ä—Ç–æ—á–∫—É';
    // –ó–∞–ø–æ–ª–Ω—è–µ–º –ø–æ–ª—è: –∏–º—è (–∏—Å–ø–æ–ª—å–∑—É–µ–º –ø–æ–ª–µ name), –æ–ø–∏—Å–∞–Ω–∏–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏—è, –∞–≤–∞—Ç–∞—Ä, –æ–ø—ã—Ç, –ø—Ä–æ–µ–∫—Ç—ã, TG, —Å—Å—ã–ª–∫–∏
    const nickInput = document.getElementById('c-nick');
    if(nickInput){ nickInput.value = item.name || ''; }
    const descInput = document.getElementById('c-desc');
    if(descInput){ descInput.value = item.desc || ''; }
    const catSelect = document.getElementById('c-cat');
    if(catSelect){ catSelect.value = item.cat || 'design'; }
    // –∞–≤–∞—Ç–∞—Ä
    const avaPrev = document.getElementById('c-ava-preview');
    if(avaPrev){
      if(item.avatar){ avaPrev.innerHTML = `<img src="${escapeHTML(item.avatar)}" alt="">`; avaPrev.dataset.src = item.avatar; }
      else { avaPrev.innerHTML = '?'; delete avaPrev.dataset.src; }
    }
    // –°–±—Ä–∞—Å—ã–≤–∞–µ–º –ø–æ–ª—è –≤—ã–±–æ—Ä–∞ –∞–≤–∞—Ç–∞—Ä–∞
    const avaFile = document.getElementById('c-ava-file');
    if(avaFile) avaFile.value = '';
    const avaUrl = document.getElementById('c-ava-url');
    if(avaUrl) avaUrl.value = '';
    const depInput = document.getElementById('c-deposits');
    if(depInput) depInput.value = item.deposits || '';
    const dealsInput = document.getElementById('c-deals');
    if(dealsInput) dealsInput.value = Number(item.deals || 0);
    const tgInput = document.getElementById('c-tg');
    if(tgInput) tgInput.value = item.tg || '';
    const forumsList = document.getElementById('c-forums-list');
    if(forumsList){ forumsList.innerHTML = ''; (Array.isArray(item.forums)? item.forums: []).forEach(f => addForumRow(f.title, f.url)); }
    openModal(cardModal);
  }

  function fillAdminTables(){
    fillAdminSellers();
    fillAdminUsers();
    fillAdminSettings();
  }

  // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã –ø—Ä–æ–¥–∞–≤—Ü–æ–≤
  function fillAdminSellers(){
    const all = read(LS.sellers,[]);
    // –ø–æ—Å—Ç—Ä–æ–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç—ã —Ñ–∏–ª—å—Ç—Ä–∞ –æ–¥–∏–Ω —Ä–∞–∑
    const filtWrap = document.getElementById('seller-filters');
    if(filtWrap && !filtWrap.dataset.init){
      filtWrap.dataset.init='1';
      // –ù–∏–∫
      const nickInput = document.createElement('input'); nickInput.className='field'; nickInput.placeholder='–ü–æ–∏—Å–∫ –ø–æ –∏–º–µ–Ω–∏/–Ω–∏–∫—Ç—É'; nickInput.style.minWidth='160px';
      nickInput.addEventListener('input',()=>{ sellerFilter.nick = nickInput.value.trim(); fillAdminSellers(); });
      filtWrap.appendChild(nickInput);
      // TG
      const tgInput = document.createElement('input'); tgInput.className='field'; tgInput.placeholder='–ü–æ–∏—Å–∫ –ø–æ TG'; tgInput.style.minWidth='140px'; tgInput.addEventListener('input',()=>{ sellerFilter.tg = tgInput.value.trim(); fillAdminSellers(); });
      filtWrap.appendChild(tgInput);
      // –ö–∞—Ç–µ–≥–æ—Ä–∏—è
      const catSel = document.createElement('select'); catSel.className='select';
      catSel.innerHTML = `<option value="all">–í—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏</option>` + Object.keys(CAT_LABELS).map(k=>`<option value="${k}">${escapeHTML(catLabel(k))}</option>`).join('');
      catSel.addEventListener('change',()=>{ sellerFilter.cat = catSel.value; fillAdminSellers(); });
      filtWrap.appendChild(catSel);
      // –°—Ç–∞—Ç—É—Å
      const statSel = document.createElement('select'); statSel.className='select';
      statSel.innerHTML = '<option value="all">–í—Å–µ —Å—Ç–∞—Ç—É—Å—ã</option>' + ['verified','seller','recruiter','unverified','blocked'].map(st=>`<option value="${st}">${escapeHTML(statusLabel(st))}</option>`).join('');
      statSel.addEventListener('change',()=>{ sellerFilter.status = statSel.value; fillAdminSellers(); });
      filtWrap.appendChild(statSel);
    }
    // –ú–∞—Å—Å–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ (bulk actions) –æ–¥–∏–Ω —Ä–∞–∑
    const bulkWrap = document.getElementById('seller-bulk-actions');
    if(bulkWrap && !bulkWrap.dataset.init){
      bulkWrap.dataset.init='1';
      // –°–º–µ–Ω–∞ —Å—Ç–∞—Ç—É—Å–∞
      const bulkStatSel = document.createElement('select'); bulkStatSel.className='select';
      bulkStatSel.innerHTML = ['','verified','seller','recruiter','unverified','blocked'].map(st=>`<option value="${st}">${st? escapeHTML(statusLabel(st)):'‚Äî –∏–∑–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å ‚Äî'}</option>`).join('');
      const bulkStatBtn = document.createElement('button'); bulkStatBtn.className='btn'; bulkStatBtn.textContent='–ü—Ä–∏–º–µ–Ω–∏—Ç—å —Å—Ç–∞—Ç—É—Å';
      bulkStatBtn.addEventListener('click',()=>{
        const val = bulkStatSel.value;
        if(!val) return;
        const arr = read(LS.sellers,[]);
        arr.forEach(item=>{ if(sellerSelection.has(item.id)) item.status = val; });
        write(LS.sellers,arr);
        sellerSelection.clear();
        document.getElementById('sel-all-sellers').checked=false;
        fillAdminSellers(); renderCards();
      });
      bulkWrap.appendChild(bulkStatSel);
      bulkWrap.appendChild(bulkStatBtn);
      // –°–º–µ–Ω–∞ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
      const bulkCatSel = document.createElement('select'); bulkCatSel.className='select';
      // –ø–µ—Ä–µ—á–µ–Ω—å –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –º–∞—Å—Å–æ–≤–æ–π —Å–º–µ–Ω—ã: –ø—É—Å—Ç–æ–π (placeholder) –∏ –≤—Å–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏
      bulkCatSel.innerHTML = `<option value="">‚Äî –∏–∑–º–µ–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é ‚Äî</option>` + Object.keys(CAT_LABELS).map(k=>`<option value="${k}">${escapeHTML(catLabel(k))}</option>`).join('');
      const bulkCatBtn = document.createElement('button'); bulkCatBtn.className='btn'; bulkCatBtn.textContent='–ü—Ä–∏–º–µ–Ω–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é';
      bulkCatBtn.addEventListener('click',()=>{
        const val = bulkCatSel.value;
        if(!val) return;
        const arr = read(LS.sellers,[]);
        arr.forEach(item=>{ if(sellerSelection.has(item.id)) item.cat = val; });
        write(LS.sellers,arr);
        sellerSelection.clear();
        document.getElementById('sel-all-sellers').checked=false;
        fillAdminSellers(); renderCards();
      });
      bulkWrap.appendChild(bulkCatSel);
      bulkWrap.appendChild(bulkCatBtn);
      // –ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ
      const bulkDelBtn = document.createElement('button'); bulkDelBtn.className='btn btn-danger'; bulkDelBtn.textContent='–£–¥–∞–ª–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω—ã–µ';
      bulkDelBtn.addEventListener('click',()=>{
        if(sellerSelection.size===0) return;
        let arr = read(LS.sellers,[]);
        arr = arr.filter(item=> !sellerSelection.has(item.id));
        write(LS.sellers,arr);
        sellerSelection.clear();
        document.getElementById('sel-all-sellers').checked=false;
        fillAdminSellers(); renderCards();
      });
      bulkWrap.appendChild(bulkDelBtn);
    }
    // –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
    let list = all;
    if(sellerFilter.nick){
      const q = sellerFilter.nick.toLowerCase();
      list = list.filter(it=> (it.name && it.name.toLowerCase().includes(q)) || (it.nick && it.nick.toLowerCase().includes(q)));
    }
    if(sellerFilter.tg){
      const q = sellerFilter.tg.toLowerCase();
      list = list.filter(it=> it.tg && it.tg.toLowerCase().includes(q));
    }
    if(sellerFilter.cat !== 'all'){
      list = list.filter(it=> it.cat === sellerFilter.cat);
    }
    if(sellerFilter.status !== 'all'){
      if(sellerFilter.status === 'blocked') list = list.filter(it=> it.blocked);
      else list = list.filter(it=> it.status === sellerFilter.status && !it.blocked);
    }
    const tbody = document.querySelector('#tbl-sellers tbody');
    tbody.innerHTML = list.map(item=>{
      const created = item.created? new Date(item.created).toLocaleDateString() : '';
      const statusOptions = ['verified','seller','recruiter','unverified','blocked'].map(st=>{
        const sel = item.status===st? 'selected':'';
        return `<option value="${st}" ${sel}>${escapeHTML(statusLabel(st))}</option>`;
      }).join('');
      const catOptions = Object.keys(CAT_LABELS).map(k=>{
        const sel = item.cat===k? 'selected':'';
        return `<option value="${k}" ${sel}>${escapeHTML(catLabel(k))}</option>`;
      }).join('');
      return `<tr>
        <td><input type="checkbox" class="sel-chk" data-seller="${item.id}" ${sellerSelection.has(item.id)?'checked':''}></td>
        <td>${escapeHTML(item.name)}</td>
        <td>${escapeHTML(catLabel(item.cat))}</td>
        <td><select class="select sel-status" data-seller="${item.id}">${statusOptions}</select></td>
        <td>${escapeHTML(item.tg||'‚Äî')}</td>
        <td>${Number(item.deals||0)}</td>
        <td>${escapeHTML(created)}</td>
        <td>
          <button class="btn" data-edit-seller="${item.id}">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
          <button class="btn btn-danger" data-del-seller="${item.id}">–£–¥–∞–ª–∏—Ç—å</button>
          <button class="btn" data-block-seller="${item.id}">${item.blocked? '–†–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å' : '–ë–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å'}</button>
        </td>
      </tr>`;
    }).join('');
    // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤—ã–±–æ—Ä–∞ —á–µ–∫–±–æ–∫—Å–æ–≤
    tbody.querySelectorAll('.sel-chk').forEach(ch=> ch.addEventListener('change',()=>{
      const idd = +ch.getAttribute('data-seller');
      if(ch.checked) sellerSelection.add(idd); else sellerSelection.delete(idd);
      // –æ–±–Ω–æ–≤–∏—Ç—å —Å–µ–ª–µ–∫—Ç–æ—Ä "–≤—ã–±—Ä–∞—Ç—å –≤—Å—ë"
      const allIds = Array.from(tbody.querySelectorAll('.sel-chk')).map(c=> +c.getAttribute('data-seller'));
      document.getElementById('sel-all-sellers').checked = allIds.length>0 && allIds.every(id=> sellerSelection.has(id));
    }));
    // –í—ã–±–æ—Ä "–≤—ã–±—Ä–∞—Ç—å –≤—Å—ë"
    const selAll = document.getElementById('sel-all-sellers');
    if(selAll && !selAll.dataset.bound){
      selAll.dataset.bound='1';
      selAll.addEventListener('change',()=>{
        const check = selAll.checked;
        sellerSelection.clear();
        tbody.querySelectorAll('.sel-chk').forEach(chk=>{
          chk.checked = check;
          const idd = +chk.getAttribute('data-seller');
          if(check) sellerSelection.add(idd);
        });
      });
    }
    // –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ –ø—Ä–æ–¥–∞–≤—Ü–∞
    tbody.querySelectorAll('[data-del-seller]').forEach(btn=> btn.addEventListener('click',()=>{
      const idd = +btn.getAttribute('data-del-seller');
      let arr = read(LS.sellers,[]);
      arr = arr.filter(x=> x.id!==idd);
      write(LS.sellers,arr);
      sellerSelection.delete(idd);
      fillAdminSellers(); renderCards();
    }));
    // –ë–ª–æ–∫–∏—Ä–æ–≤–∫–∞/—Ä–∞–∑–±–ª–æ–∫–∏—Ä–æ–≤–∫–∞
    tbody.querySelectorAll('[data-block-seller]').forEach(btn=> btn.addEventListener('click',()=>{
      const idd = +btn.getAttribute('data-block-seller');
      const arr = read(LS.sellers,[]);
      const item = arr.find(x=> x.id===idd);
      if(item){ item.blocked = !item.blocked; write(LS.sellers,arr); }
      fillAdminSellers(); renderCards();
    }));
    // –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Å—Ç–∞—Ç—É—Å–∞
    tbody.querySelectorAll('.sel-status').forEach(sel=> sel.addEventListener('change',()=>{
      const idd = +sel.getAttribute('data-seller');
      const arr = read(LS.sellers,[]);
      const item = arr.find(x=> x.id===idd);
      if(item){ item.status = sel.value; if(sel.value==='blocked'){ item.blocked = true; } else { item.blocked = false; } write(LS.sellers,arr); }
      fillAdminSellers(); renderCards();
    }));
    // –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ —á–µ—Ä–µ–∑ bulk actions handled above
    // –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–≤—Ü–∞
    tbody.querySelectorAll('[data-edit-seller]').forEach(btn=> btn.addEventListener('click',()=>{
      const idd = +btn.getAttribute('data-edit-seller');
      openEditSeller(idd);
    }));
  }

  // –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∏ –¥–µ–π—Å—Ç–≤–∏—è
  function fillAdminUsers(){
    const us = read(LS.users,[]);
    const tbu = document.querySelector('#tbl-users tbody');
    tbu.innerHTML = us.map(u=>{
      const created = u.created? new Date(u.created).toLocaleDateString() : '';
      const actions = [];
      if(u.u !== 'admin'){
        if(u.role === 'user') actions.push(`<button class="btn" data-promote-user="${escapeHTML(u.u)}">–ü–æ–≤—ã—Å–∏—Ç—å –¥–æ admin</button>`);
        if(u.role === 'admin') actions.push(`<button class="btn" data-demote-user="${escapeHTML(u.u)}">–ü–æ–Ω–∏–∑–∏—Ç—å –¥–æ user</button>`);
        actions.push(`<button class="btn" data-reset-user="${escapeHTML(u.u)}">–°–±—Ä–æ—Å–∏—Ç—å –ø–∞—Ä–æ–ª—å</button>`);
        actions.push(`<button class="btn btn-danger" data-del-user="${escapeHTML(u.u)}">–£–¥–∞–ª–∏—Ç—å</button>`);
      } else {
        actions.push('‚Äî');
      }
      return `<tr>
        <td>${escapeHTML(u.u)}</td>
        <td>${escapeHTML(u.role)}</td>
        <td>${escapeHTML(created)}</td>
        <td>${actions.join(' ')}</td>
      </tr>`;
    }).join('');
    // –î–µ–π—Å—Ç–≤–∏—è –¥–ª—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
    tbu.querySelectorAll('[data-promote-user]').forEach(btn=> btn.addEventListener('click',()=>{
      const u = btn.getAttribute('data-promote-user');
      const arr = read(LS.users,[]);
      const user = arr.find(x=> x.u===u);
      if(user){ user.role='admin'; write(LS.users,arr); fillAdminUsers(); syncAuth(); }
    }));
    tbu.querySelectorAll('[data-demote-user]').forEach(btn=> btn.addEventListener('click',()=>{
      const u = btn.getAttribute('data-demote-user');
      const arr = read(LS.users,[]);
      const user = arr.find(x=> x.u===u);
      if(user){ user.role='user'; write(LS.users,arr); fillAdminUsers(); syncAuth(); }
    }));
    tbu.querySelectorAll('[data-reset-user]').forEach(btn=> btn.addEventListener('click',()=>{
      const u = btn.getAttribute('data-reset-user');
      const arr = read(LS.users,[]);
      const user = arr.find(x=> x.u===u);
      if(user){
        const newPass = Math.random().toString(36).slice(2,10);
        user.p = newPass;
        write(LS.users,arr);
        alert('–ù–æ–≤—ã–π –ø–∞—Ä–æ–ª—å –¥–ª—è '+u+': '+newPass);
      }
    }));
    tbu.querySelectorAll('[data-del-user]').forEach(btn=> btn.addEventListener('click',()=>{
      const u = btn.getAttribute('data-del-user');
      let arr = read(LS.users,[]);
      arr = arr.filter(x=> x.u!==u);
      write(LS.users,arr);
      fillAdminUsers();
    }));
  }

  // –ù–∞—Å—Ç—Ä–æ–π–∫–∏: –∑–∞–ø–æ–ª–Ω—è–µ–º —Ñ–æ—Ä–º—ã –∏ –Ω–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
  function fillAdminSettings(){
    // –∑–∞–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤ applySettings; –∑–¥–µ—Å—å –Ω–∞–∑–Ω–∞—á–∞–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
    // –ë–∞–Ω–Ω–µ—Ä—ã: –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –∏ —Å—Å—ã–ª–æ–∫
    const fileInputs = [document.getElementById('banner-file-1'), document.getElementById('banner-file-2')];
    const urlInputs = [document.getElementById('banner-url-1'), document.getElementById('banner-url-2')];
    const linkInputs = [document.getElementById('banner-link-1'), document.getElementById('banner-link-2')];
    const previewEls = [document.getElementById('banner-preview-1'), document.getElementById('banner-preview-2')];
    const st = getSettings();
    function handleBannerFile(i){
      const file = fileInputs[i].files && fileInputs[i].files[0];
      if(!file) return;
      const fr = new FileReader();
      fr.onload = ()=>{
        st.banners.slots[i].src = fr.result;
        // clear url field
        if(urlInputs[i]) urlInputs[i].value = '';
        saveSettings(st);
        applySettings();
      };
      fr.readAsDataURL(file);
    }
    fileInputs.forEach((inp,i)=>{
      if(inp && !inp.dataset.bound){ inp.dataset.bound='1'; inp.addEventListener('change',()=> handleBannerFile(i)); }
    });
    urlInputs.forEach((inp,i)=>{
      if(inp && !inp.dataset.bound){ inp.dataset.bound='1'; inp.addEventListener('input',()=>{
        st.banners.slots[i].src = normalizeURL(inp.value.trim());
        saveSettings(st);
        applySettings();
      }); }
    });
    linkInputs.forEach((inp,i)=>{
      if(inp && !inp.dataset.bound){ inp.dataset.bound='1'; inp.addEventListener('input',()=>{
        st.banners.slots[i].link = inp.value.trim();
        saveSettings(st);
      }); }
    });
    // –ë–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞
    const tickerItems = document.getElementById('ticker-items');
    const tickerSpeed = document.getElementById('ticker-speed');
    if(tickerItems && !tickerItems.dataset.bound){ tickerItems.dataset.bound='1'; tickerItems.addEventListener('input',()=>{
      st.ticker.items = tickerItems.value.split('\n').map(x=>x.trim()).filter(x=>x);
      saveSettings(st);
      applySettings();
    }); }
    if(tickerSpeed && !tickerSpeed.dataset.bound){ tickerSpeed.dataset.bound='1'; tickerSpeed.addEventListener('change',()=>{
      const v = parseInt(tickerSpeed.value||'0',10);
      st.ticker.speed = isNaN(v)? DEFAULT_SETTINGS.ticker.speed : Math.max(5,v);
      saveSettings(st);
      applySettings();
    }); }
    // –ü–∞–ª–∏—Ç—Ä–∞
    const palAccent = document.getElementById('palette-accent');
    const palDark = document.getElementById('palette-accent-dark');
    const pal2 = document.getElementById('palette-accent2');
    function updatePalette(){
      st.palette.accent = palAccent.value;
      st.palette.accentDark = palDark.value;
      st.palette.accent2 = pal2.value;
      saveSettings(st);
      applySettings();
    }
    [palAccent,palDark,pal2].forEach(inp=>{
      if(inp && !inp.dataset.bound){ inp.dataset.bound='1'; inp.addEventListener('change',updatePalette); }
    });
    // –ì–∞—Ä–∞–Ω—Ç–∏–∏
    const gTitle = document.getElementById('guarantee-title');
    const gSub = document.getElementById('guarantee-subtitle');
    if(gTitle && !gTitle.dataset.bound){ gTitle.dataset.bound='1'; gTitle.addEventListener('input',()=>{
      st.guarantee.title = gTitle.value;
      saveSettings(st);
      applySettings();
    }); }
    if(gSub && !gSub.dataset.bound){ gSub.dataset.bound='1'; gSub.addEventListener('input',()=>{
      st.guarantee.subtitle = gSub.value;
      saveSettings(st);
      applySettings();
    }); }
    // –≠–∫—Å–ø–æ—Ä—Ç JSON
    const exportBtn = document.getElementById('export-json');
    if(exportBtn && !exportBtn.dataset.bound){ exportBtn.dataset.bound='1'; exportBtn.addEventListener('click',()=>{
      const data = { sellers: read(LS.sellers,[]), users: read(LS.users,[]), settings: getSettings() };
      document.getElementById('json-data').value = JSON.stringify(data, null, 2);
    }); }
    // –ò–º–ø–æ—Ä—Ç JSON
    const importBtn = document.getElementById('import-json');
    if(importBtn && !importBtn.dataset.bound){ importBtn.dataset.bound='1'; importBtn.addEventListener('click',()=>{
      try{
        const txt = document.getElementById('json-import').value;
        const obj = JSON.parse(txt);
        if(obj.sellers) write(LS.sellers,obj.sellers);
        if(obj.users) write(LS.users,obj.users);
        if(obj.settings) saveSettings(obj.settings);
        fillAdminTables();
        renderCards();
        applySettings();
        alert('–ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ');
      }catch(e){ alert('–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π JSON'); }
    }); }
  }

  document.addEventListener('click',(e)=>{ const btn = e.target.closest('[data-profile]'); if(btn){ openSeller(+btn.getAttribute('data-profile')); } });
  function openSeller(id){
    const s = read(LS.sellers,[]).find(x=>x.id===id); if(!s) return;
    const m = document.createElement('div'); m.className='modal open';
    const ava = s.avatar? `<img src="${escapeHTML(s.avatar)}" alt="">` : escapeHTML((s.name||'?')[0]||'?');
    const chips = `
      ${s.status?`<span class="chip">${escapeHTML(statusLabel(s.status))}</span>`:''}
      ${s.flags?.verified?'<span class="chip">–ü—Ä–æ–≤–µ—Ä–µ–Ω</span>':''}
      ${s.flags?.escrow?'<span class="chip">–≠—Å–∫—Ä–æ—É</span>':''}
      ${s.flags?.rating4?'<span class="chip">4‚òÖ+</span>':''}`;
    const forumList = Array.isArray(s.forums)&&s.forums.length ? `<div style='margin-top:8px'>${s.forums.map(it=>`<a class="link-chip" href="${escapeHTML(it.url||'#')}" target="_blank" rel="noopener">üîó ${escapeHTML(it.title||'–°—Å—ã–ª–∫–∞')}</a>`).join(' ')}</div>` : '';
    m.innerHTML = `
    <div class='panel'>
      <div class='panel-head'><b>${escapeHTML(s.name)}</b><button class='x' data-close>√ó</button></div>
      <div class='panel-body'>
        <div class='row' style='gap:16px'>
          <div class='avatar' style='width:72px;height:72px;font-size:28px'>${ava}</div>
          <div>
            <div class='muted'>–ö–∞—Ç–µ–≥–æ—Ä–∏—è: ${escapeHTML(catLabel(s.cat))}</div>
            <p style='margin:8px 0'>${escapeHTML(s.desc||'')}</p>
            <div class='row' style='gap:8px'>${chips}</div>
            <p class='muted' style='margin-top:8px'>–ù–∏–∫: ${escapeHTML(s.nick||'‚Äî')} ‚Ä¢ –û–ø—ã—Ç: ${escapeHTML(s.deposits||'‚Äî')} ‚Ä¢ –ü—Ä–æ–µ–∫—Ç—ã: ${Number(s.deals||0)} ‚Ä¢ TG: ${s.tg? escapeHTML(s.tg) : '‚Äî'}</p>
            ${forumList}
          </div>
        </div>
      </div>
    </div>`;
    m.addEventListener('click',ev=>{ if(ev.target.matches('[data-close]')||ev.target===m) m.remove(); });
    document.body.appendChild(m);
  }

  document.querySelectorAll('.modal').forEach(m=> m.addEventListener('click',e=>{ if(e.target===m) closeModal(m); }));

  syncAuth();
  // –ü—Ä–∏–º–µ–Ω—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Ü–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞, –±–∞–Ω–Ω–µ—Ä—ã, –±–µ–≥—É—â–∞—è —Å—Ç—Ä–æ–∫–∞ –∏ —Ç.–¥.)
  applySettings();

  (function(){
    const out = document.getElementById('tg-count'); if(!out) return;
    function fmt(n){ if(n>=1e6) return (n/1e6).toFixed(n%1e6?1:0).replace(/\.0$/,'')+'M'; if(n>=1e3) return (n/1e3).toFixed(n%1e3?1:0).replace(/\.0$/,'')+'K'; return String(n); }
    function fetchText(u){ return fetch(u,{cache:'no-store'}).then(r=>{ if(!r.ok) throw 0; return r.text(); }); }
    function extract(t){ const m = t.match(/([0-9][0-9\s\.,]*)\s*(–ø–æ–¥–ø–∏—Å—á–∏–∫–æ–≤|–ø–æ–¥–ø–∏—Å—á–∏–∫–∏|–ø–æ–¥–ø–∏—Å—á–∏–∫–∞|subscribers|members)/i); return m? parseInt(m[1].replace(/[^0-9]/g,''),10):null; }
    (async ()=>{
      try{
        out.textContent='‚Ä¶';
        const urls=[
          'https://r.jina.ai/http://t.me/OwnershipDesign',
          'https://r.jina.ai/http://t.me/s/OwnershipDesign',
          'https://r.jina.ai/https://t.me/OwnershipDesign'];
        for(const u of urls){ try{ const t = await fetchText(u); const n = extract(t||''); if(n){ out.textContent = fmt(n); return; } }catch(e){} }
        out.textContent='‚Äî';
      }catch(e){ out.textContent='‚Äî'; }
    })();
  })();

  (function(){
    const btn = document.getElementById('copy-onion'); if(!btn) return;
    function legacyCopy(text){ const ta=document.createElement('textarea'); ta.value=text; ta.setAttribute('readonly',''); ta.style.position='fixed'; ta.style.top='-1000px'; document.body.appendChild(ta); ta.focus(); ta.select(); try{document.execCommand('copy');}catch(e){} document.body.removeChild(ta); }
    async function safeCopy(text){ try{ if(navigator.clipboard && navigator.clipboard.writeText){ await navigator.clipboard.writeText(text); } else { legacyCopy(text); } return true; } catch(e){ legacyCopy(text); return false; } }
    btn.addEventListener('click', async ()=>{ const val = (document.getElementById('onion-field')?.textContent||'').trim(); const ok = await safeCopy(val); btn.textContent = ok?'‚úÖ':'‚ùå'; setTimeout(()=>btn.textContent='üìã',1200); });
  })();

  (function(){
    const track = document.getElementById('partners-track'); if(!track) return;
    const clones = Array.from(track.children).map(n=>n.cloneNode(true)); clones.forEach(n=>track.appendChild(n));
    const style = document.createElement('style'); style.textContent='@keyframes partners-slide{from{transform:translateX(0)}to{transform:translateX(-50%)}}'; document.head.appendChild(style);
    function setAnim(){ const gap=16; let total=0; Array.from(track.children).forEach(el=> total += el.getBoundingClientRect().width + gap); const half = total/2; const speed = 60; const dur = Math.max(20, Math.round(half/speed)); track.style.animation = `partners-slide ${dur}s linear infinite`; }
    setTimeout(setAnim,0); window.addEventListener('resize',()=>{ clearTimeout(window.__p2); window.__p2=setTimeout(setAnim,150); });
  })();
  </script>
</body>
</html>
